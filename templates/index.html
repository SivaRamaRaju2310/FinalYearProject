<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotion-Based Recommendation System</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome Icons -->
    <script defer src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <!-- JavaScript File -->
    <script defer src="{{ url_for('static', filename='script.js') }}"></script>

    <style>
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 10px solid;
            border-radius: 10px;
            border-image-source: linear-gradient(45deg, #ff007f, #007bff, #ff8c00, #ff007f);
            border-image-slice: 1;
            animation: rgbBorder 5s infinite linear;
            z-index: 9999;
            pointer-events: none;
        }

        @keyframes rgbBorder {
            0% { border-image-source: linear-gradient(45deg, #ff007f, #007bff, #ff8c00, #ff007f); }
            33% { border-image-source: linear-gradient(45deg, #007bff, #ff8c00, #ff007f, #007bff); }
            66% { border-image-source: linear-gradient(45deg, #ff8c00, #ff007f, #007bff, #ff8c00); }
            100% { border-image-source: linear-gradient(45deg, #ff007f, #007bff, #ff8c00, #ff007f); }
        }
    </style>
</head>
<body class="relative bg-gradient-to-r from-purple-200 to-pink-300 text-gray-800 text-center p-6 font-[Poppins]">
    
    {% if 'username' not in session %}
        <script>
            window.location.href = "{{ url_for('login') }}";
        </script>
    {% endif %}
    
    <div class="container mx-auto">
        <!-- Heading -->
        <h1 class="relative z-10 text-3xl md:text-4xl font-bold text-center 
            bg-gradient-to-r from-red-500 to-indigo-600 text-transparent bg-clip-text
            drop-shadow-lg animate-fade-in inline-block">
            ðŸŽ­ Emotion-Based Recommendation System
        </h1>

        <p class="mt-2 text-lg text-gray-700">Welcome, {{ session['username'] }}!</p>
        <a href="{{ url_for('logout') }}" class="text-red-600 font-semibold mt-2 inline-block">Logout</a>

        <!-- Circular Upload Section -->
        <div class="relative m-4 w-52 h-52 rounded-full border-4 border-blue-500 flex items-center justify-center mx-auto mb-6 overflow-hidden animate-glow">
            <video id="video" autoplay class="w-full h-full object-cover hidden"></video>
            <canvas id="canvas" class="hidden"></canvas>
            <img id="captured-image" src="" alt="Captured Image" class="w-full h-full object-cover rounded-full hidden">
            
            <!-- GIF Placeholder -->
            <div id="placeholder" class="absolute inset-0 flex items-center justify-center animate-fade-in">
                <img src="{{ url_for('static', filename='giphy.gif') }}" alt="Loading GIF" class="w-48 opacity-80">
            </div>
        </div>

        <!-- Capture Button -->
        <button id="capture" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold 
            transition-all transform hover:scale-105 hover:shadow-md active:scale-95 active:bg-blue-600 relative overflow-hidden">
            Capture & Detect
        </button>

        <!-- Animated Recommendation Box -->
        <div id="results" class="mt-6 p-6 bg-purple-300 rounded-xl shadow-lg opacity-0 scale-95 
            transition-all duration-700 ease-out shadow-blue-400">
            <h2 class="text-xl font-bold mb-6 text-center">
                Detected Emotion: <span id="emotion" class="text-blue-600"></span>
            </h2>

            <!-- Games Recommendation -->
            <div class="bg-pink-200 rounded-lg shadow-md p-6 mb-6">
                <h3 class="text-lg font-semibold text-center">ðŸŽ® Recommended Games</h3>
                <div id="game-recommendations" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </div>

            <!-- Songs Recommendation -->
            <div class="bg-yellow-200 rounded-lg shadow-md p-6 mb-6">
                <h3 class="text-lg font-semibold text-center">ðŸŽµ Recommended Songs</h3>
                <div id="song-recommendations" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </div>

            <!-- Quotes Recommendation -->
            <div class="bg-blue-200 rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold text-center">ðŸ“œ Recommended Quotes</h3>
                <div id="quote-recommendations" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
        </div>
    </div>

    <!-- Tailwind Animation Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        "fade-in": "fadeIn 1s ease-out forwards",
                        "glow": "glowEffect 2s infinite alternate",
                    },
                    keyframes: {
                        fadeIn: {
                            "0%": { opacity: 0, transform: "scale(0.9)" },
                            "100%": { opacity: 1, transform: "scale(1)" },
                        },
                        glowEffect: {
                            "0%": { boxShadow: "0px 0px 10px #ff0000" },
                            "50%": { boxShadow: "0px 0px 15px #00ff00" },
                            "100%": { boxShadow: "0px 0px 10px #0000ff" },
                        },
                    },
                },
            },
        };
    </script>
</body>
</html>
